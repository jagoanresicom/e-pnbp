@model  Pnbp.Entities.PrioritasAlokasi
@{
    //Layout = null;

    var lsstatus = new List<SelectListItem>();
    lsstatus.Add(new SelectListItem { Text = "Aktif", Value = "Aktif" });
    lsstatus.Add(new SelectListItem { Text = "Tidak Aktif", Value = "Tidak Aktif" });
}

<style type="text/css">
    .x_panel {
        border: none;
    }
    /* For Firefox */
    input[type='number'] {
        -moz-appearance: textfield;
    }
    /* Webkit browsers like Safari and Chrome */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
</style>

<script src='@Url.Content("~/resources/js/jquery.validate.min.js")' type="text/javascript"></script>
<script src='@Url.Content("~/resources/js/jquery.validate.unobtrusive.min.js")' type="text/javascript"></script>


<div class="" id="dynamic_content">
    <div class="page-title">
        <div class="title_left"><h2 style="width:100%"><span id="LabelTitle">@Model.Mode</span></h2></div>
        <div class="clearfix"></div>
    </div>
    <div class="clearfix"></div>
    <div class="x_panel" style="border:0px;">
        <div class="x_content">
            <form class="form-horizontal form-label-left" id="frmdatamanfaat" role="form">
                @Html.HiddenFor(model => model.PrioritasOrigin, new { id = "txtOrigin" })
                @Html.HiddenFor(model => model.Manfaatid, new { id = "Manfaatid" })
                @Html.HiddenFor(model => model.Mode)
                @Html.HiddenFor(model => model.KantorId, new { id = "KantorId" })
                @Html.HiddenFor(model => model.Namasatker, new { id = "Namasatker" })
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="x_content">
                        @if (Model.Mode == "Tambah Data Manfaat")
                        {
                        }
                        else
                        {
                            <div class="form-group">
                                <label class="control-label col-md-4 col-sm-4 col-xs-12">Kode Satker</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.TextBoxFor(model => model.Kodesatker, new { @class = "form-control", @id = "txtkdsatker", @readonly = "readonly" })
                                </div>
                            </div>
                        }
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Nama Satker</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                @if (Model.Mode == "Tambah Data Manfaat")
                                {
                                    @Html.DropDownListFor(m => m.KantorId, new SelectList(@Model.ListSatKer, "kantorid", "namasatker"), new { @class = "select2_single form-control input-md", @style = "width:100%", @id = "txtsatker" })
                                    @Html.ValidationMessageFor(m => m.KantorId, "", new { @class = "error" })
                                    //@Html.TextBoxFor(model => model.Namasatker, new { @class = "form-control", @id = "txtsatker" })
                                }
                                else
                                {
                                    @Html.TextBoxFor(model => model.Namasatker, new { @class = "form-control", @id = "txtsatker", @readonly = "readonly" })
                                }
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Program Satker</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                @if (Model.Mode == "Tambah Data Manfaat")
                                {
                                    @Html.DropDownListFor(m => m.ProgramId, new SelectList(@Model.ListProgram, "programid", "nama"), new { @class = "select2_single form-control input-md", @style = "width:100%", @id = "txtsatker" })
                                    @Html.ValidationMessageFor(m => m.ProgramId, "", new { @class = "error" })
                                    //@Html.TextBoxFor(model => model.Namasatker, new { @class = "form-control", @id = "txtsatker" })
                                }
                                else
                                {
                                    @Html.TextBoxFor(model => model.Namaprogram, new { @class = "form-control", @id = "txtsatker", @readonly = "readonly" })
                                }
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Nilai Anggaran</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                @Html.TextBoxFor(model => model.Nilaianggaran, new { @class = "form-control", @id = "txtanggaran", @readonly = "readonly" })
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Total Alokasi</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                @if (Model.Mode == "Tambah Data Manfaat")
                                {
                                    @Html.TextBoxFor(model => model.JUMLAHALOKASI, new { @class = "form-control", @id = "txtalokasi" })
                                }
                                else
                                {
                                    @Html.TextBoxFor(model => model.JUMLAHALOKASI, new { @class = "form-control", @id = "txtalokasi", @readonly = "readonly" })
                                }
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Status Aktif</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                @Html.DropDownListFor(model => model.Statusaktif, lsstatus, new { @class = "select2_single form-control input-md", @style = "width:100%", @id = "cmbstatusaktif" })
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Januari</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(model => model.AnggJan, new { @class = "form-control", type = "number", @id = "nilaiangjan", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(model => model.RankJan, new { @class = "form-control", type = "number", @id = "rankjan", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Februari</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(model => model.AnggFeb, new { @class = "form-control", type = "number", @id = "nilaiangfeb", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(model => model.RankFeb, new { @class = "form-control", type = "number", @id = "rankfeb", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Maret</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(model => model.AnggMar, new { @class = "form-control", type = "number", @id = "nilaiangmar", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(model => model.RankMar, new { @class = "form-control", type = "number", @id = "rankmar", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <div class="x_content">
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank April</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(model => model.AnggApr, new { @class = "form-control", type = "number", @id = "nilaiangapr", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(model => model.RankApr, new { @class = "form-control", type = "number", @id = "rankapr", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Mei</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(model => model.AnggMei, new { @class = "form-control", type = "number", @id = "nilaiangmei", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(model => model.RankMei, new { @class = "form-control", type = "number", @id = "rankmei", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Juni</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(model => model.AnggJun, new { @class = "form-control", type = "number", @id = "nilaiangjun", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(model => model.RankJun, new { @class = "form-control", type = "number", @id = "rankjun", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Juli</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(m => m.AnggJul, new { @class = "form-control", type = "number", @id = "nilaiangjul", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(m => m.RankJul, new { @class = "form-control", type = "number", @id = "rankjul", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Agustus</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(m => m.AnggAgt, new { @class = "form-control", type = "number", @id = "nilaiangagt", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(m => m.RankAgt, new { @class = "form-control", type = "number", @id = "rankagt", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank September</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(m => m.AnggSep, new { @class = "form-control", type = "number", @id = "nilaiangsep", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(m => m.RankSep, new { @class = "form-control", type = "number", @id = "ranksep", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Oktober</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(m => m.AnggOkt, new { @class = "form-control", type = "number", @id = "nilaiangokt", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(m => m.RankOkt, new { @class = "form-control", type = "number", @id = "rankokt", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank November</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(m => m.AnggNov, new { @class = "form-control", type = "number", @id = "nilaiangnov", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(m => m.RankNov, new { @class = "form-control", type = "number", @id = "ranknov", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">Ang/Rank Desember</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <div class="input-group" style="margin-right:-5px;">
                                    @Html.TextBoxFor(m => m.AnggDes, new { @class = "form-control", type = "number", @id = "nilaiangdes", @placeholder = "Anggaran" })
                                    <span class="input-group-addon" style="width:16px;">/</span>
                                    @Html.TextBoxFor(m => m.RankDes, new { @class = "form-control", type = "number", @id = "rankdes", @placeholder = "Ranking" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group" style="margin-top:-10px;">
                            <label class="control-label col-md-4 col-sm-4 col-xs-12">File</label>
                            <div class="col-md-8 col-sm-8 col-xs-12">
                                <span class="btn btn-success btn-file"><i class="fa fa-file-pdf-o"></i>&nbsp;&nbsp;Pilih File<input type="file" name="UploadFromFile" id="txtUploadFile" class="btn btn-success" accept=".pdf" /></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
                <div class="modal-footer">
                    <button type="submit" id="btnsimpandatamanfaat" class="btn btn-success">Simpan</button>
                    @*<button type="button" id="btncancelmodal" class="btn btn-warning">Cancel</button>*@
                    <button type="button" id="btnKembali" class="btn btn-success">Kembali</button>
                </div>
            </form>
        </div>
    </div>
    <div class="row" style="margin-top:10px;padding-top:10px;border-radius:3px;border:none;" id="docviewpanel">
        <div class="col-md-12 col-sm-12 col-xs-12" id="docViewer" style="min-height:1px;display:none">...</div>
    </div>
</div>


<script src='@Url.Content("~/resources/js/pdfobject.min.js")'></script>

<script type="text/javascript">
    var BackToDataManfaatDetail = function () {
        var id = $('#KantorId').val();
        var namasatker = $('#Namasatker').val();

        //$.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>' });
        var pdata = { kantorid: id, namakantor: namasatker };
        $.pjax({
            container: "#dynamic_content",
            type: 'POST',
            @*url: '@Url.Action("DetilSatkerManfaat", "Pemanfaatan")',*@
            url: '@Url.Action("DataManfaatDetail", "Pemanfaatan")',
            data: pdata,
            success: function (data, textStatus, XMLHttpRequest) {
                $('#dynamic_content').html(data);
                //$.unblockUI();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                $.unblockUI();
            }
        });
    };

    $("#btnKembali").on("click", function (e) {
        history.back();
    });

    var somethingChanged = false;

    var dfPengumuman = null;
    $("#txtUploadFile").on("change", function (e) {
        var input = $(this),
            numFiles = input.get(0).files ? input.get(0).files.length : 1;
        if (numFiles > 0) {
            var file = dfPengumuman = input.get(0).files[0],
                blob = new Blob([file], { type: "application/pdf;base64" }),
                objurl = window.URL.createObjectURL(blob);
            if ($("#docViewer").height() < 500)
                $("#docViewer").height(500);
            PDFObject.embed(objurl, $("#docViewer"), { forcePDFJS: true, PDFJS_URL: '@Url.Content("~/Contents/pdfviewer.html")' });
            $('#docViewer').css('display', 'inline-block');
        }
    });

    $(document).ready(function () {
        $.unblockUI();

        var anggjan = parseFloat($('#nilaiangjan').val() != null && $('#nilaiangjan').val() != "" ? $('#nilaiangjan').val(): 0);
        var anggfeb = parseFloat($('#nilaiangfeb').val() != null && $('#nilaiangfeb').val() != "" ? $('#nilaiangfeb').val() : 0);
        var anggmar = parseFloat($('#nilaiangmar').val() != null && $('#nilaiangmar').val() != "" ? $('#nilaiangmar').val() : 0);
        var anggapr = parseFloat($('#nilaiangapr').val() != null && $('#nilaiangapr').val() != "" ? $('#nilaiangapr').val() : 0);
        var anggmei = parseFloat($('#nilaiangmei').val() != null && $('#nilaiangmei').val() != "" ? $('#nilaiangmei').val() : 0);
        var anggjun = parseFloat($('#nilaiangjun').val() != null && $('#nilaiangjun').val() != "" ? $('#nilaiangjun').val() : 0);
        var anggjul = parseFloat($('#nilaiangjul').val() != null && $('#nilaiangjul').val() != "" ? $('#nilaiangjul').val() : 0);
        var anggagt = parseFloat($('#nilaiangagt').val() != null && $('#nilaiangagt').val() != "" ? $('#nilaiangagt').val() : 0);
        var anggsep = parseFloat($('#nilaiangsep').val() != null && $('#nilaiangsep').val() != "" ? $('#nilaiangsep').val() : 0);
        var anggokt = parseFloat($('#nilaiangokt').val() != null && $('#nilaiangokt').val() != "" ? $('#nilaiangokt').val() : 0);
        var anggnov = parseFloat($('#nilaiangnov').val() != null && $('#nilaiangnov').val() != "" ? $('#nilaiangnov').val() : 0);
        var anggdes = parseFloat($('#nilaiangdes').val() != null && $('#nilaiangdes').val() != "" ? $('#nilaiangdes').val() : 0);




        $('.select2_single').select2({ width: 'resolve' });

        $('input').change(function () {
            somethingChanged = true;
        });

        $('#cmbstatusaktif').change(function () {
            somethingChanged = true;
        });

        if ('@Model.Tahun' == '2020') { $('#txtanggaran').attr("readonly", false); }

        if ('@Model.AlokJan' !== null && '@Model.AlokJan' !== '' && '@Model.AlokJan' == '1') {
            $('#nilaiangjan').attr("readonly", true); $('#rankjan').attr("readonly", true);
            var total = anggjan
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokFeb' !== null && '@Model.AlokFeb' !== '' && '@Model.AlokFeb' == '1') {
            $('#nilaiangfeb').attr("readonly", true); $('#rankfeb').attr("readonly", true);
            var total = anggjan + anggfeb
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokMar' !== null && '@Model.AlokMar' !== '' && '@Model.AlokMar' == '1') {
            $('#nilaiangmar').attr("readonly", true); $('#rankmar').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokApr' !== null && '@Model.AlokApr' !== '' && '@Model.AlokApr' == '1') {
            $('#nilaiangapr').attr("readonly", true); $('#rankapr').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokMei' !== null && '@Model.AlokMei' !== '' && '@Model.AlokMei' == '1') {
            $('#nilaiangmei').attr("readonly", true); $('#rankmei').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokJun' !== null && '@Model.AlokJun' !== '' && '@Model.AlokJun' == '1') {
            $('#nilaiangjun').attr("readonly", true); $('#rankjun').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokJul' !== null && '@Model.AlokJul' !== '' && '@Model.AlokJul' == '1') {
            $('#nilaiangjul').attr("readonly", true); $('#rankjul').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun + anggjul
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokAgt' !== null && '@Model.AlokAgt' !== '' && '@Model.AlokAgt' == '1') {
            $('#nilaiangagt').attr("readonly", true); $('#rankagt').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun + anggjul + anggagt
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokSep' !== null && '@Model.AlokSep' !== '' && '@Model.AlokSep' == '1') {
            $('#nilaiangsep').attr("readonly", true); $('#ranksep').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun + anggjul + anggagt + anggsep
            $('#txtalokasi').val(total);
        }
        console.log('data', '@Model.AlokOkt', '@Model.AlokSep');
        if ('@Model.AlokOkt' !== null && '@Model.AlokOkt' !== '' && '@Model.AlokOkt' == '1') {
            $('#nilaiangokt').attr("readonly", true); $('#rankokt').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun + anggjul + anggagt + anggsep + anggokt
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokNov' !== null && '@Model.AlokNov' !== '' && '@Model.AlokNov' == '1') {
            $('#nilaiangnov').attr("readonly", true); $('#ranknov').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun + anggjul + anggagt + anggsep + anggokt + anggnov
            $('#txtalokasi').val(total);
        }
        if ('@Model.AlokDes' !== null && '@Model.AlokDes' !== '' && '@Model.AlokDes' == '1') {
            $('#nilaiangdes').attr("readonly", true); $('#rankdes').attr("readonly", true);
            var total = anggjan + anggfeb + anggmar + anggapr + anggmei + anggjun + anggjul + anggagt + anggsep + anggokt + anggnov + anggdes
            $('#txtalokasi').val(total);
        }

        $('#rankjan').attr("readonly", true);
        $('#rankfeb').attr("readonly", true);
        $('#rankmar').attr("readonly", true);
        $('#rankapr').attr("readonly", true);
        $('#rankmei').attr("readonly", true);
        $('#rankjun').attr("readonly", true);
        $('#rankjul').attr("readonly", true);
        $('#rankagt').attr("readonly", true);
        $('#ranksep').attr("readonly", true);
        $('#rankokt').attr("readonly", true);
        $('#ranknov').attr("readonly", true);
        $('#rankdes').attr("readonly", true);
    });

    function closemodel() { $('#myModalDocViewer').modal('hide'); $('#dataholder').html(''); };

    $("#btnclosemodal, #btncancelmodal").click(function (e) { closemodel(); });

    $("#frmdatamanfaat").submit(function (e) {
        var frm = new FormData(this);
        frm.append("filepdf", dfPengumuman);

        if (somethingChanged == true) {
            //$.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>', baseZ: 2000 });
            $.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>' });
            $.ajax({
                type: 'POST',
                url: '@Url.Action("UpdateDataManfaat", "Administrasi")',
                data: frm,
                contentType: false,
                processData: false,
                success: function (data, textStatus, XMLHttpRequest) {
                    if (!data.Status) {
                        $.unblockUI();
                        showmsg('Error', 'Gagal Update - ' + data.Pesan);
                    }
                    else {
                        //$('#messpanel').html(data.Pesan);

                        //var options = { "backdrop": "static", keyboard: true };
                        //$('#myModalMessViewer').modal(options);
                        //$('#myModalMessViewer').modal('show');

                        BackToDataManfaatDetail();
                        //closemodel();
                        //$.unblockUI();
                        //showmsg('Informasi', data.Pesan);
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log(errorThrown);
                    $.unblockUI();
                }
            });
        }
        e.preventDefault();
        return false;
    });

    ////format masking input a
    //webshims.setOptions('forms-ext', {
    //    replaceUI: 'auto',
    //    types: 'number'
    //});
    //webshims.polyfill('forms forms-ext');
</script>