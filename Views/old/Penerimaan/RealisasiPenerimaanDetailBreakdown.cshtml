@*@model List<Pnbp.Entities.StatistikPenerimaan>*@

@{
    ViewBag.Judul = "Rincian Realisasi Penerimaan";
    var get_data = ViewBag.data;
}

<style>
    td.numeric, th.numeric {
        text-align: right;
    }

    .tdcenter {
        text-align: center;
    }
</style>

@*<link href='@Url.Content("~/resources/css/table.css")' rel="stylesheet">*@

<table class="table table-striped table-bordered dt-responsive nowrap" style="clear: both; border-collapse: collapse; width: 100%;">
    <thead>
        <tr>
            <th class="tdcenter">No.</th>
            <th class="tdcenter">Kode Satker</th>
            <th class="tdcenter">Nama Satker</th>
            <th class="tdcenter">Nama Prosedur</th>
            <th class="tdcenter">Realisasi Fisik</th>
            <th class="tdcenter">Realisasi Penerimaan</th>
        </tr>
    </thead>

    <tbody>
        @foreach (var item in get_data)
        {
            <tr onclick="showDetailBreakdownPenerimaan('@item.kantorid', '@item.tahun', '@item.bulan', @item.namaprosedur)" style="cursor: pointer">
                <td class="numeric">@item.urutan</td>
                <td>@item.kodesatker</td>
                <td>@item.namakantor</td>
                <td>@item.namaprosedur</td>
                <td>@item.jumlah</td>
                <td>@item.penerimaan</td>
            </tr>
        }

        @*<tr>
            <td class="numeric">#</td>
            <td colspan="2" style="text-align:right;">Total</td>
            <td class="numeric">@get_data.Sum(a => a.penerimaan).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
            <td></td>
            <td class="numeric">@get_data.Sum(a => a.operasional).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
        </tr>*@
    </tbody>
</table>

<script type="text/javascript">
    $(document).ready(function () {
        $.unblockUI();
    });
</script>

<script type="text/javascript">
    var showDetailBreakdownPenerimaan = function (k, n, v) {
        //resetInfiniteScroll();
        var pdata = { Id: k, pTahun: n, pBulan: v };
        $.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>' });
        $.pjax({
            container: "#penerimaanholder",
            type: 'POST',
            url: '@Url.Action("RealisasiPenerimaanDetailBreakdown", "Penerimaan")',
            data: pdata,
            success: function (data, textStatus, XMLHttpRequest) {
                if (data == 'noresults') {
                    showmsg('Status', 'Tidak ada data yang ditemukan');
                }
                else {
                    $('#penerimaanholder').html(data);
                }
                $.unblockUI();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest, textStatus, errorThrown);
                $.unblockUI();
            }
        });
        $.unblockUI();
    }
</script>