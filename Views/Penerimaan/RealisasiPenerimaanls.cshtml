@model Pnbp.Entities.FilterPenerimaan

<table id="datatableTahapan" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th class="tdcenter">No.</th>
            <th class="tdcenter">Kode</th>
            <th class="tdcenter">Nama Satker</th>
            <th class="tdcenter">Penerimaan</th>
            <th class="tdcenter">Operasional</th>
            <th class="tdcenter">Aksi</th>
        </tr>
        <tr>
            <td><span id="totalpenerimaan"></span></td>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.lspenerimaandetail)
        {
        <tr onclick="showDetailPenerimaan('@item.kantorid', '@Model.tahun', '@Model.bulan')" style="cursor: pointer">
            <td class="numeric">@item.urutan</td>
            <td>@item.kodesatker</td>
            <td>@item.nama_satker</td>
            <td class="numeric">@item.penerimaan.ToString("N0", new System.Globalization.CultureInfo("id-ID"))<input type="text" class="penerimaan" value="@item.penerimaan" onblur="totalpenerimaan()" /></td>
            <td class="numeric">@item.operasional.ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
            <td class="numeric"><a href="@Url.Action("RealisasiPenerimaanPerbandinganSatker", "penerimaan", new { kantorId = item.kantorid, tahun = Model.tahun, bulan = Model.bulan })" class="btn btn-primary">Perbandingan</a></td>

        </tr>
        }

        @*<tr>
            <td class="numeric">#</td>
            <td style="text-align:right;" colspan="2">Total</td>
            <td></td>
            <td class="numeric">@Model.lspenerimaan.Sum(a => a.penerimaan).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
            <td class="numeric">@Model.lspenerimaan.Sum(a => a.operasional).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
        </tr>*@
    </tbody>

</table>

<script type="text/javascript">
    var showDetailPenerimaan = function (k, n, v) {
        //resetInfiniteScroll();
        var pdata = { Id: k, pTahun: n, pBulan: v };
        $.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>' });
        $.pjax({
            container: "#penerimaanholder",
            type: 'POST',
            url: '@Url.Action("RealisasiPenerimaanDetail", "Penerimaan")',
            data: pdata,
            success: function (data, textStatus, XMLHttpRequest) {
                if (data == 'noresults') {
                    showmsg('Status', 'Tidak ada data yang ditemukan');
                }
                else {
                    $('#penerimaanholder').html(data);
                }
                $.unblockUI();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest, textStatus, errorThrown);
                $.unblockUI();
            }
        });
        $.unblockUI();
    }

    function totalpenerimaan()
    {
        $('#penerimaan').each(function (i, val) {
            console.log(i)
        });
    }
</script>