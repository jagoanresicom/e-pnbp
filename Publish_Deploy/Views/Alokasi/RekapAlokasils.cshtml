@model Pnbp.Entities.FilterRekapAlokasi

<table id="datatableTahapan" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th class="tdcenter">No.</th>
            <th class="tdcenter">Tahun</th>
            <th class="tdcenter">Bulan</th>
            <th class="tdcenter">Tgl Alokasi</th>
            <th class="tdcenter">Tipe Manfaat</th>
            <th class="tdcenter">Alokasi</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.lsrekapalokasi)
        {
            <tr onclick="showDetailAlokasi('@item.rekapalokasiid')" style="cursor: pointer">
                <td class="numeric">@item.urutan</td>
                <td>@item.tahun</td>
                <td>@item.bulan</td>
                <td>@item.tglalokasi</td>
                <td>@item.tipemanfaat</td>
                <td class="numeric">@item.alokasi.ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
            </tr>
        }

        <tr>
            <td style="text-align:right;" colspan="5">Total</td>
            <td class="numeric">@Model.lsrekapalokasi.Sum(a => a.alokasi).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
    </tbody>

</table>

<script type="text/javascript">
    var showDetailAlokasi = function (k) {
        resetInfiniteScroll();
        var pdata = { Id: k };
        $.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>' });
        $.pjax({
            container: "#rekapalokasiholder",
            type: 'POST',
            url: '@Url.Action("RekapAlokasiDetail", "Alokasi")',
            data: pdata,
            success: function (data, textStatus, XMLHttpRequest) {
                if (data == 'noresults') {
                    showmsg('Status', 'Tidak ada data yang ditemukan');
                }
                else {
                    $('#rekapalokasiholder').html(data);
                }
                $.unblockUI();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest, textStatus, errorThrown);
                $.unblockUI();
            }
        });
        $.unblockUI();
    }
</script>