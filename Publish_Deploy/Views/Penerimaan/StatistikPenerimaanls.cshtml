@model Pnbp.Entities.FilterPenerimaan

<table id="datatableTahapan" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th class="tdcenter">No.</th>
            <th class="tdcenter">Nama Satker</th>
            <th class="tdcenter">Penerimaan</th>
            <th class="tdcenter">Operasional</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.lspenerimaan)
        {
            <tr onclick="showDetailPenerimaan('@item.kantorid', '@Model.tahun', '@Model.bulan')" style="cursor: pointer">
                <td class="numeric">@item.urutan</td>
                <td>@item.nama</td>
                <td class="numeric">@item.penerimaan.ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
                <td class="numeric">@item.operasional.ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
            </tr>
        }

        <tr>
            <td class="numeric">#</td>
            <td style="text-align:right;">Total</td>
            <td class="numeric">@Model.lspenerimaan.Sum(a => a.penerimaan).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
            <td class="numeric">@Model.lspenerimaan.Sum(a => a.operasional).ToString("N0", new System.Globalization.CultureInfo("id-ID"))</td>
    </tbody>

</table>

<script type="text/javascript">
    var showDetailPenerimaan = function (k, n, v) {
        //resetInfiniteScroll();
        var pdata = { Id: k, pTahun: n, pBulan: v };
        $.blockUI({ message: '<div style=\"padding:10px\"><b>Sedang proses... </b><p>harap tunggu</p></div>' });
        $.pjax({
            container: "#penerimaanholder",
            type: 'POST',
            url: '@Url.Action("StatistikPenerimaanDetail", "Penerimaan")',
            data: pdata,
            success: function (data, textStatus, XMLHttpRequest) {
                if (data == 'noresults') {
                    showmsg('Status', 'Tidak ada data yang ditemukan');
                }
                else {
                    $('#penerimaanholder').html(data);
                }
                $.unblockUI();
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log(XMLHttpRequest, textStatus, errorThrown);
                $.unblockUI();
            }
        });
        $.unblockUI();
    }
</script>